const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D0XrqJ0l.css"])))=>i.map(i=>d[i]);
const n=function(){const n="undefined"!=typeof document&&document.createElement("link").relList;return n&&n.supports&&n.supports("modulepreload")?"modulepreload":"preload"}(),t={};function o({tag:n,t,text:o,o:e,i:r}={},s=[]){const c=document.createElement(n||"div");t&&(Array.isArray(t)||(t=t.split(" ")),c.classList.add(...t.filter(Boolean)));for(let i of s)i&&c.append(i);return e&&(c.innerHTML+=e),o&&c.append(o),r&&c.addEventListener("click",r),c}function e(n,t=[]){return o({tag:"button",...n},t)}function r(n){n.style.transform=""}const s=new class{u={};subscribe(n,t){this.u[n]||(this.u[n]=[]),this.u[n].push(t)}unsubscribe(n,t){if(!this.u[n])return;const o=this.u[n].indexOf(t);o>=0&&this.u[n].splice(o,1)}l(n,t){this.u[n]&&this.u[n].forEach(n=>n(t))}},c={8:3,9:0},i=Object.values({m:4,h:5,p:6,v:7}),u=Object.values({C:8,M:9});function a(n){return i.includes(n)}function l(n){return u.includes(n)}const f=[...i,...u],d=1,m=2,w=3,h="H",p=Object.values({P:0,S:1,k:2,O:3}),v=p.filter(n=>0!==n);function y(n){return v.includes(n)}function g(n,t){return n.A===t.A&&n.L===t.L}function C(n,t){return[n.A-t.A,n.L-t.L]}function b(n,t){const[o,e]=C(n,t);return[Math.abs(o),Math.abs(e)]}const M=[[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1]],P={4:[-1,0],7:[0,1],5:[1,0],6:[0,-1]},S=Object.values(P);function x(n,t=0){return(t?M:S).map(t=>k(n,t))}function k(n,[t,o]){return{A:n.A+t,L:n.L+o}}function O(n,t){const[o,e]=C(t,n);for(let[r,[s,c]]of Object.entries(P))if(o===s&&e===c)return r;return null}function A(n,t){return k(n,P[t])}function E(n){return new Promise(t=>setTimeout(t,n))}async function L(n){if(!(n<0))return await E(n),new Promise(n=>requestAnimationFrame(()=>n()))}const I={};function T(n){return!!R(n)}function D(n,t=1){const o=new Audio(n);return o.preload="auto",o.preservesPitch=0,o.playbackRate=t,o.play().catch(n=>{console.error("Error playing sound:",n)}),new Promise(n=>{o.addEventListener("ended",()=>n()),o.addEventListener("error",()=>n())})}function R(n){return I[n]||(I[n]=null),I[n]}function j(n,t){I[n]=t}const $={0:1,3:1.6,2:1.2,1:1.4};function z(n){return async function(n,t=1){const o=R(8);o&&await D(o,t)}(0,$[n])}function U(n){return{0:"R",3:"T",2:"Y",1:"U"}[n]}const q={};function F(n){return q[n]??=o({t:"t",i:()=>{z(t)}},[o({t:["E",N(t=n)&&"R"],o:'<svg xmlns="http://www.w3.org/2000/svg" color="#ff2ea6" viewBox="0 0 500 500">\n  <path d="M340 25c-24 10-21 53-49 50-23-6-46-5-68 1-23-6-17-47-42-47-12 16-10 38-17 56-7 33-20 69-5 102 5 19 26 30 30 47-5 23-25 39-31 62-10 22-17 45-24 68-28-13-51-41-48-73-4-23 27-35 24-58-20-16-47 15-55 34-19 51 10 111 56 137 21 8 26 31 34 49 15 20 43 22 66 20 44-2 90 3 134-3 32-12 42-51 38-81-4-57-27-109-54-158 18-20 39-41 40-70 3-42-15-81-21-122-2-5-4-10-8-14Z"/>\n  <path d="m378 157 64-14 1 6-63 14zM378 170l67 3v5l-67-3zM145 157l-64-13-2 4 65 14zM144 170l-66 3v5l66-3z"/>\n  <ellipse cx="312" cy="145" fill="currentColor" rx="28" ry="22"/>\n  <ellipse cx="312" cy="145.1" rx="7" ry="19"/>\n  <ellipse cx="216" cy="145" fill="currentColor" rx="28" ry="22"/>\n  <ellipse cx="216" cy="145.1" rx="7" ry="19"/>\n</svg>'})]);var t}function N(n){return 0===n}function W(n){return p.includes(n)}const B=Object.values({I:4,T:5,D:6}),_={A:0,L:0};function H(n){return B.includes(n)}function V(n){return 4===n}const Y={};function G(n){return{A:Math.floor((n-1)/2),L:Math.floor((n-1)/2)}}const Z={4:"â³ðŸŒœ",5:"â³5!"};function K(n){return n.filter((t,o)=>n.indexOf(t)===o)}function J(n){return n[Math.floor(Math.random()*n.length)]}const Q={0:"Start game",1:"New game",5:"Try again",25:"Retries",2:"Continue",3:"Difficulty",4:"Moves",6:"What would you like to add next?",7:"New action",8:"New rule",9:"Kitten personality",10:"Moony loves the moon and will try to reach it.",11:"Ivy loves to run around the tree.",12:"Splashy loves water and wants to play in it. Once she's in, you can only lure her out with Mom's meow.",13:"When Mom meows, all kittens move one step closer. But you can only do this every 3 moves.",14:"You can stay where you are and wait for the kittens to move.",15:"The moon moves across the sky. Once it sets, darkness falls - but you can still finish.",16:"Unite all kittens before the moon sets!",17:"Your choice will be explained here.",18:"Your choice",19:"United!",20:"Oh no!",21:"Meow",22:"Wait",23:"Loading...",24:"Hint",26:"Collect +{0}",27:"Give me everything! I'll figure it out.",28:"Record meow",29:"Delete meow",30:"Share or load a game via the emoji string"},X={0:"å¼€å§‹æ¸¸æˆ",1:"æ–°æ¸¸æˆ",5:"å†è¯•ä¸€æ¬¡",25:"é‡è¯•æ¬¡æ•°",2:"ç»§ç»­",3:"éš¾åº¦",4:"ç§»åŠ¨æ¬¡æ•°",6:"æŽ¥ä¸‹æ¥ä½ æƒ³æ·»åŠ ä»€ä¹ˆï¼Ÿ",7:"æ–°åŠ¨ä½œ",8:"æ–°è§„åˆ™",9:"å°çŒ«æ€§æ ¼",10:"æœˆæœˆå–œæ¬¢æœˆäº®ï¼Œä¼šåŠªåŠ›æŽ¥è¿‘å®ƒã€‚",11:"è‰¾è–‡å–œæ¬¢ç»•ç€æ ‘è·‘ã€‚",12:"æ°´æ°´å–œæ¬¢æ°´ï¼Œæƒ³åœ¨é‡Œé¢çŽ©è€ã€‚ä¸€æ—¦å¥¹è¿›å…¥æ°´ä¸­ï¼Œä½ åªèƒ½ç”¨å¦ˆå¦ˆçš„å–µå–µå£°å¼•è¯±å¥¹å‡ºæ¥ã€‚",13:"å½“å¦ˆå¦ˆå–µå–µå«æ—¶ï¼Œæ‰€æœ‰å°çŒ«éƒ½ä¼šé è¿‘ä¸€æ­¥ã€‚ä½†ä½ æ¯3æ¬¡ç§»åŠ¨æ‰èƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚",14:"ä½ å¯ä»¥å¾…åœ¨åŽŸåœ°ï¼Œç­‰å¾…å°çŒ«ç§»åŠ¨ã€‚",15:"æœˆäº®åœ¨å¤©ç©ºä¸­ç§»åŠ¨ã€‚ä¸€æ—¦å®ƒè½ä¸‹ï¼Œé»‘æš—å°±ä¼šé™ä¸´ - ä½†ä½ ä»ç„¶å¯ä»¥å®Œæˆæ¸¸æˆã€‚",16:"åœ¨æœˆäº®è½ä¸‹ä¹‹å‰è®©æ‰€æœ‰å°çŒ«å›¢èšï¼",17:"ä½ çš„é€‰æ‹©å°†åœ¨è¿™é‡Œè§£é‡Šã€‚",18:"ä½ çš„é€‰æ‹©",19:"å›¢èšäº†ï¼",20:"å“¦ä¸ï¼",21:"å–µ",22:"ç­‰å¾…",23:"åŠ è½½ä¸­...",24:"æç¤º",26:"æ”¶é›† +{0}",27:"ç»™æˆ‘å…¨éƒ¨ï¼æˆ‘è‡ªå·±èƒ½æžå®šã€‚",28:"å½•åˆ¶å–µå£°",29:"åˆ é™¤å–µå£°",30:"é€šè¿‡è¡¨æƒ…ç¬¦å·å­—ç¬¦ä¸²åˆ†äº«æˆ–åŠ è½½æ¸¸æˆ"};function nn(){var n;return"zh"===(n=navigator.language,n?.slice(0,2))?"zh":"en"}function tn(n,...t){const o=nn();return document.documentElement.setAttribute("lang",o),function(){const n=nn();return"de"===n?function(){throw Error("German language is not enabled.")}():"zh"===n?X:Q}()[n].replace(/\{(\d+)}/g,([n,o])=>t[o])}const on=[...v,...u,...Object.values({R:4,j:5})];function en(n){return fn().includes(n)}function rn(){return en(4)}function sn(){return rn()}function cn(){return en(5)}const un={3:10,2:11,1:12,8:13,9:14,4:15,5:16},an={3:[4],1:[8],9:[2],5:[4,8,9]};let ln;function fn(){return void 0===ln&&(ln=[]),ln}function dn(){const n=fn();return on.filter(t=>!n.includes(t)).filter(t=>!an[t]||an[t].every(t=>n.includes(t)))}function mn(){return dn().length>0}function wn(n){return 8===n?"ðŸ’¬Â "+tn(21):"ðŸ’¤Â "+tn(22)}function hn(n){let t,o,e;for(e=n.length-1;e>0;e--)t=Math.floor(Math.random()*(e+1)),o=n[e],n[e]=n[t],n[t]=o;return n}const pn={[d]:"ðŸ’š",[m]:"ðŸŸ¡",[w]:"ðŸŸ¥"};function vn(n){return Array.from({length:n},()=>"â—").join("")}function yn(n,t){const o=n.$[0];return o?l(t)?en(t)?0===tt(n,t):0:nt(n,A(o,t),0):(console.error("Mother cat not found, cannot perform move."),0)}function gn(n,t,o){const e=n.$[t];return g(e,o)?e:x(e).filter(o=>nt(n,o,t)).sort((n,t)=>{const[e,r]=b(n,o),[s,c]=b(t,o),i=e+r,u=s+c;return i===u?Math.max(e,r)-Math.max(s,c)||n.A-t.A||n.L-t.L:i-u})[0]??e}function Cn(n,t,o,e){const r={...n.$[t]};if(!en(t))return r;let s={...r};switch(t){case 3:s=function(n){const t=n.$[4];return t?gn(n,3,t):n.$[3]}(n);break;case 2:s=function(n){const t=n.$[2],o=n.$[5];if(o){const e=x(o,1),r=e.findIndex(n=>g(n,t));return-1!==r?e[(r+1)%e.length]:gn(n,2,o)}}(n);break;case 1:s=function(n){const t=n.$[6];return t?gn(n,1,t):n.$[1]}(n)}return g(s,o)&&g(r,e)&&(s=r),s}function bn(n,t){const o=n.$[0];if(!o)return console.error("Mother cat not found, cannot perform move."),n.$;const e=Kn(n,o),r=Jn(n,o);let s;if(l(t)&&(s=function(n,t){const o=Hn(n.$),e=n.$[0];if(8===t){const t=Jn(n,e);for(const r of t)o[r]=gn(n,r,e)}return o}(n,t)),8!==t){if(s=Hn(n.$),a(t)){s[0]=function(n,t,o){const e=A(n.$[0],o);return nt(n,e,0)?e:n.$[0]}(n,0,t);for(const n of e)s[n]={...s[0]}}for(const t of r)s[t]=Cn(n,t,o,s[0])}return s[4]=function(n){const t=n.$[4];if(!t||!rn())return t;const o=n.F.U;return t&&t.L<o?{...t,L:t.L+1}:t}(n),s}let Mn=1;const Pn=42;function Sn(n){switch(n){case 4:return"up";case 5:return"down";case 6:return"left";case 7:return"right";case 8:return"meow";case 9:return"wait";default:return n}}function xn(n,t={N:0}){const o=qn(n);console.debug("Starting par calculation...");const e=kn(o,t),r=function(n,t){const o=t.W.length;if(o<=1)return 3;const e=t.W.every(n=>n.some(n=>!a(n))),r=t.W.every(n=>n.slice(0,2).some(n=>!a(n)));if(o<5)return r?3:2;const s=On(n,[...f]);return K(t.W.map(n=>n[0])).length/s.length<.5||r||o<10&&e?2:1}(o,e);return console.info("Calculated par:",e.B,"Time taken:",NaN,"ms","Difficulty:",pn[r],e.W.length+" solutions: ",e.W),console.info("First solution:",e.W[0]?.map(Sn).join(" > ")),{B:e.B,W:hn(e.W),_:r}}function kn(n,t){const o=n.H;if(0===o.length?Mn=1:Mn++,Gn(n))return{B:0,W:[o]};if(Zn(n)||o.length>=5)return{B:Pn,W:[o]};let e={B:Pn,W:[]};for(const r of On(n,[...f])){if(!yn(n,r))continue;const s=Yn(n);s.H=[...o,r],s.$=Hn(bn(s,r));const c=kn(s,t),i=c.B+1;e.B=Math.min(i,e.B),i<Pn&&(t.N||i===e.B)?e.W=[...e.W,...c.W]:i<Pn&&(e.W=[...c.W])}return 0===o.length&&console.info(`Par calculation completed after ${Mn} iterations.`),e}function On(n,t){return t.filter(t=>yn(n,t))}const An={V:void 0,Y:0,G:void 0,Z:void 0,language:"en",K:0},En={0:"ðŸŸ£",3:"ðŸŸ¡",2:"ðŸŸ¢",1:"ðŸ”µ",4:"ðŸŒ™",5:"ðŸŒ³",6:"ðŸ’§"};function Ln(n){return Object.entries(n.J).map(([n,t])=>t?`${En[n]}${t.A}${t.L}`:"").join("")}function In(n,t){console.info("Deserializing game:",n);const o=_n();o[4]={..._};for(let s=0;s<n.length;s+=4){const t=n.slice(s,s+2),e=Object.entries(En).find(([,n])=>n===t)?.[0];o[e]={A:+n.charAt(s+2),L:+n.charAt(s+3)}}t?.X&&(o[4]=null);const e={U:5,J:o,W:[]};if(t?.nn)return e;const r=xn(e,{N:1});return{...e,W:r.W,_:r._}}function Tn(){return-1!==An.Y}const Dn={0:"ðŸŸ£11ðŸŸ¡21ðŸŸ¢21ðŸ”µ21",1:"ðŸŸ£12ðŸŸ¡32ðŸŸ¢31ðŸ”µ32ðŸŒ³22ðŸ’§21",2:"ðŸŸ£11ðŸŸ¡32ðŸŸ¢31ðŸ”µ33ðŸŒ³23ðŸ’§21ðŸŒ™12"},Rn={0:3,1:4,2:5};let jn;function $n(){if(jn)return jn;const n=In(Dn[2],{nn:1});return jn=n.J,jn}function zn(n){return H(n)?function(n){return Y[n]??=function(n){const t=o({t:"y"}),e=o({t:""+{5:"q2",6:"w2",4:"e2"}[n]});return t.append(e),t}(n)}(n):F(n)}function Un(n,t){return H(t)?Tn()?n.J[t]:V(t)&&!sn()?null:$n()[t]:G(n.U)}function qn(n){return{F:n,$:Hn(n.J),H:[]}}function Fn(n){return n?Nn(n.F):null}function Nn(n){const t=n.U,o=n.J[4];return o?t-o.L:Pn}function Wn(n,t){return n.U-t}const Bn=[...p,...B];function _n(){return Bn.reduce((n,t)=>(n[t]=null,n),{})}function Hn(n){return Bn.reduce((t,o)=>(t[o]=n[o]?{...n[o]}:null,t),{})}function Vn(n){return{U:n.U,J:Hn(n.J),W:n.W.map(n=>[...n])}}function Yn(n){return{F:Vn(n.F),$:Hn(n.$),H:[...n.H]}}function Gn(n){if(!n)return 0;const t=n.$[0];return v.every(o=>{const e=n.$[o];return g(t,e)})}function Zn(n){return n&&cn()?n.H.length>=Fn(n)&&!Gn(n):0}function Kn(n,t){return v.filter(o=>g(n.$[o],t))}function Jn(n,t){return v.filter(o=>!g(n.$[o],t))}function Qn(n){return Xn(n.U).filter(t=>function(n,t){return Object.values(t.J).filter(Boolean).every(t=>!g(t,n))}(t,n))}function Xn(n){const t=[];for(let o=0;o<n;o++)for(let e=0;e<n;e++)t.push({A:o,L:e});return t}function nt(n,t,o){if(!function(n,t){const{A:o,L:e}=n;return o>=0&&o<t&&e>=0&&e<t}(t,n.F.U))return 0;const e=n.$[5],r=n.$[6];if(e&&g(t,e))return 0;const s=!!r&&g(t,r),c=W(o)&&N(o);return!s||!c}function tt(n,t){const o=c[t],e=n.H.lastIndexOf(t),r=-1===e?0:o-(n.H.length-e);return Math.max(0,r)}let ot=new Set;function et(n,t,e){const r=function(n){return o({t:["Q"],text:n})}(t);ot.add(r);const s=n.getBoundingClientRect();r.style.left=s.left+s.width/2+"px",r.style.top=s.top-r.offsetHeight+"px",document.body.appendChild(r),setTimeout(()=>r.classList.add("W"),1),e&&setTimeout(()=>st(r),e)}function rt(){for(const n of ot)st(n)}function st(n){ot.delete(n),n.classList.remove("W"),n.addEventListener("transitionend",()=>{n.remove()})}let ct=0;const it={tn:"j",left:"k",en:"l",rn:"z"},ut={4:it.en,5:it.rn,6:it.left,7:it.right};function at(n){const t=o({t:`${it.tn} ${ut[n]}`});return t.innerHTML='<svg fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">\n  <path d="M133 231a8 8 0 0 1-5-7v-40H48a16 16 0 0 1-16-16V88a16 16 0 0 1 16-16h80V32a8 8 0 0 1 14-6l96 96a8 8 0 0 1 0 12l-96 96a8 8 0 0 1-9 1Z"/>\n</svg>',t}function lt(n,t){n.classList.remove(...Object.values(ut)),n.classList.add(ut[t])}const ft={[d]:0,[m]:1,[w]:3};function dt(n=0){return n+"Â ðŸ§¶"}function mt(n=10,t=40){return Math.max(0,Math.min(1,(0-10*n)/t*10))}const wt=o({t:"r2"}),ht=o({t:"t2"}),pt=o({t:"y2"}),vt=o({t:"u2"});let yt=e({text:tn(5),t:["a","e"],i:()=>{s.l(0,{sn:1})}});function gt(n){yt.classList.toggle("a",!n),yt.classList.toggle("F",n),n&&yt.focus()}function Ct(n=0){const t=An.G&&rn(),e=An.G&&cn();wt.classList.toggle("p",!t);const r=Fn(An.G),s=r&&e?" / "+(r<Pn&&!n?r:"?"):"";ht.innerHTML=`${tn(4)}: ${n?0:An.G?.H.length??0}${s}`;const c=An.G?.F._;pt.classList.toggle("p",!e||!c),pt.innerHTML=tn(3)+": ",pt.append(n?"?":o({t:bt[c],text:vn(c)})),vt.classList.toggle("p",0===An.K),vt.innerHTML=`${tn(25)}: ${Array.from({length:An.K},()=>"I").join("")}`}const bt={[d]:"i2",[m]:"o2",[w]:"p2"};async function Mt(n,t,e=.5,s=0){const c=o({o:n,t:"h"}),i=t.getBoundingClientRect(),u=i.right-document.body.clientWidth,a=i.top-i.height/2,l=i.width*e*-1;c.style.setProperty("transform",`translate(calc(50% + ${u+l}px), calc(50% + ${a}px)) scale(2)`),c.style.setProperty("filter",`hue-rotate(${s}deg)`),document.body.append(c),await L(0),c.classList.add("a"),r(c),await E(500),E(500).then(()=>{c.remove()})}const Pt=o({t:"S"}),St=o({t:"D"});let xt,kt;const Ot=o({t:"X"}),At=[4,7,5,6],Et="hint",Lt={ArrowUp:4,ArrowDown:5,ArrowLeft:6,ArrowRight:7,w:4,a:6,s:5,d:7,e:8,q:9,F1:Et};function It(){for(const n of At){const t=An.G&&!yn(An.G,n);jt(n).disabled=t}}const Tt={4:"J",7:"K",5:"L",6:"Z"};function Dt(n){return o({tag:"kbd",text:Object.entries(Lt).find(([t,o])=>o===n&&t.length<=2)?.[0].toUpperCase()})}const Rt={};function jt(n){return Rt[n]??=e({i:()=>zt(n),t:["o",Tt[n]]},[at(n),Dt(n)])}function $t(n){return Rt[n]??=e({i:()=>zt(n)},[o({tag:"span"},[wn(n)]),Dt(n)])}async function zt(n){kt&&(kt.classList.remove("F"),kt=void 0),xt.disabled=0,await async function(n,t){if(ct)console.warn("Already performing a move, ignoring this one.");else if(void 0===An.G||Gn(An.G)||Zn(An.G))console.warn("Game is not in progress, ignoring this move.");else if(yn(n,t)){ct=1;try{rt(),n.H.push(t);const o=l(t)?async function(n,t){8===t&&(et(zn(0),tn(21),1500),z(0),await E(300))}(0,t):Promise.resolve();Kn(n,n.$[0]),n.$=bn(n,t),Kn(n,n.$[0]),await o,An.Z=bn(n,9);const e=Gn(n),r=Zn(n);yo(n,An.Z,e),(e||r)&&(await E(300),et(zn(0),tn(e?19:20)),s.l(2,{cn:e}))}catch(o){console.error("Error performing move:",o)}ct=0}else console.warn("Invalid move: "+t)}(An.G,n),Ct(),Ut(),It()}function Ut(){if(!An.G)return;const n=tt(An.G,8);Ot.innerHTML=""+(n||""),$t(8).classList.toggle(h,n>0)}function qt(){if(xt&&xt.classList.toggle("p",!An.G||!cn()),!An.G)return;const n=u.some(n=>en(n));St.classList.toggle("p",!n);for(const t of u)$t(t).classList.toggle("p",!en(t))}function Ft(n){var t;kt=l(t=n)?$t(t):jt(t),kt.classList.add("F")}function Nt(n=5){const t=$n(),o=_n();for(const e of B)V(e)&&!sn()||(o[e]={...t[e]});for(const e of p)o[e]=G(n);return{U:n,J:o,W:[]}}function Wt(n,t,o=0){let e=Vn(n);e.J=function(n,t){const o=n.U,e=Xn(o),r=n=>0===n.A,s=e.filter(n=>!(n=>0===n.A||0===n.L||n.A===o-1||n.L===o-1)(n)),c=e.filter(n=>!r(n)),i=t.un?e.filter(r):[{..._,L:Wn(n,t.an)}],u=J(s),a=J(c.filter(n=>!g(n,u))),l=sn()?J(i):null;return{..._n(),5:u,6:a,4:l}}(e,t);const r=hn(Qn(e));p.forEach((n,t)=>{e.J[n]=r[t]??r[0]});let s,c=e.W;if(t.ln){const n=xn(e,{N:t.fn});if((n.B>t.an||n.B<3||n._>=3)&&o<13)return console.info("not a good setup",n.B,pn[n._]),Wt(e,t,o+1);if(!t.fn&&n.B<t.an&&o<13){const r=n.B,u=Vn(e),a={..._,L:Wn(u,r)},l=Qn(u);if(i=a,!l.some(n=>g(n,i)))return console.info("not a good setup - moon is not on an empty field"),Wt(e,t,o+1);u.J[4]=a;const f=xn(u);if(f.B!==r)return console.info("not a good setup - par doesn't match moon"),Wt(e,t,o+1);e=u,c=f.W,s=f._}else c=n.W,s=n._;console.info("found setup, iterations: ",o,"par: ",n.B)}var i;return{...e,J:e.J,W:c,_:s}}let Bt;const _t=[0,91,128,0,0,95,128,12,0,0,12,0,72,0,0,0,0,0,0,0,2,255,0,0,32,83,3,130,4],Ht={dn:[{mn:_t,wn:[1,2,2,3,3,2,2,2,1],c:[{n:[122,,,,127,,,,122,,,,127,,,,122,,,,126,,,,122,,,,127],f:[]},{n:[127,,134,,126,,134,,127,,134,,127,,,,127,,134,,126,,134,,127,,134,,127],f:[]},{n:[127,122,127,122,126,122,126,122,127,122,127,122,127,,,,127,122,127,122,126,122,126,122,127,122,126,122,127],f:[]}]},{mn:_t,wn:[,,2,1,1,2],c:[{n:[144,,141,141,142,,139,139,137,139,141,142,144,,,,144,144,141,141,142,142,139,139,137,,139,,137],f:[]},{n:[132,,129,129,130,,127,127,125,127,129,130,132,,,,132,132,129,129,130,130,127,127,125,,127,,125],f:[]}]}],hn:22050,pn:32,vn:8,yn:2},Vt={dn:[{mn:_t,wn:[1],c:[{n:[135,139,142,147],f:[]}]}],hn:11025,pn:16,vn:1,yn:1},Yt={dn:[{mn:_t,wn:[1],c:[{n:[129,126,123,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,129],f:[]}]}],hn:11025,pn:16,vn:1,yn:1};var Gt=function(){var n,t,o,e,r,s=function(n){return.003959503758*2**((n-128)/12)},c=function(n,t,o){var e,r,c,u,a,l,f=i[n.mn[0]],d=n.mn[1],m=n.mn[3]/32,w=i[n.mn[4]],h=n.mn[5],p=n.mn[8]/32,v=n.mn[9],y=n.mn[10]*n.mn[10]*4,g=n.mn[11]*n.mn[11]*4,C=n.mn[12]*n.mn[12]*4,b=1/C,M=-n.mn[13]/16,P=n.mn[14],S=o*2**(2-n.mn[15]),x=new Int32Array(y+g+C),k=0,O=0;for(e=0,r=0;e<y+g+C;e++,r++)r>=0&&(r-=S,a=s(t+(15&(P=P>>8|(255&P)<<4))+n.mn[2]-128),l=s(t+(15&P)+n.mn[6]-128)*(1+8e-4*n.mn[7])),c=1,e<y?c=e/y:e>=y+g&&(c=(1-(c=(e-y-g)*b))*3**(M*c)),u=f(k+=a*c**m)*d,u+=w(O+=l*c**p)*h,v&&(u+=(2*Math.random()-1)*v),x[e]=80*u*c|0;return x},i=[function(n){return Math.sin(6.283184*n)}];this.init=function(s){n=s,t=s.vn,o=0,e=s.hn*s.pn*(t+1)*2,r=new Int32Array(e)},this.gn=function(){var s,i,u,a,l,f,d,m,w,h,p,v,y,g,C=new Int32Array(e),b=n.dn[o],M=n.hn,P=n.pn,S=0,x=0,k=0,O=[];for(u=0;u<=t;++u)for(d=b.wn[u],a=0;a<P;++a){var A=d?b.c[d-1].f[a]:0;A&&(b.mn[A-1]=b.c[d-1].f[a+P]||0,A<17&&(O=[]));var E=b.mn[20],L=43.23529*b.mn[21]*3.141592/44100,I=1-b.mn[22]/255,T=b.mn[24]/32,D=b.mn[25]/512,R=6.283184*2**(b.mn[26]-9)/M,j=b.mn[27]/255,$=b.mn[28]*M&-2;for(p=(u*P+a)*M,l=0;l<4;++l)if(f=d?b.c[d-1].n[a+l*P]:0){O[f]||(O[f]=c(b,f,M));var z=O[f];for(i=0,s=2*p;i<z.length;i++,s+=2)C[s]+=z[i]}for(i=0;i<M;i++)(h=C[m=2*(p+i)])||k?(x+=(v=1.5*Math.sin(v=L))*(y=I*(h-x)-(S+=v*x)),h=3==E?x:1==E?y:S,k=(h*=T)*h>1e-5,g=h*(1-(w=Math.sin(R*m)*D+.5)),h*=w):g=0,m>=$&&(g+=C[m-$+1]*j,h+=C[m-$]*j),C[m]=0|g,C[m+1]=0|h,r[m]+=0|g,r[m+1]+=0|h}return++o/n.yn},this.Cn=function(){var n=44+2*e-8,t=n-36,o=new Uint8Array(44+2*e);o.set([82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&t,t>>8&255,t>>16&255,t>>24&255]);for(var s=0,c=44;s<e;++s){var i=r[s];i=i<-32767?-32767:i>32767?32767:i,o[c++]=255&i,o[c++]=i>>8&255}return o}};let Zt,Kt,Jt=0,Qt=0;function Xt(n){return new Promise(t=>{const o=setInterval(()=>{n.gn()>=1&&(clearInterval(o),t())},0)})}function no(){return Jt=!Jt,to(),Jt}function to(n=Jt){const t=!Zt.paused&&!Zt.ended;n&&!t?Zt.play():!n&&t&&Zt.pause()}function oo(n){n.textContent=T(8)?"ðŸ—‘ï¸ "+tn(29):"ðŸŽ¤ "+tn(28)}let eo=0;const ro=o({t:"P"});let so,co,io,uo;function ao(){return eo||(s.subscribe(2,()=>{ro&&lo()}),s.subscribe(0,()=>{Ct(1)}),s.subscribe(1,async()=>{await E(0),gt(0),Ct(),xt.disabled=0,Ut(),qt(),It(),Pt.classList.toggle(h,0),St.classList.toggle("a",0),xt.classList.toggle("a",0),so?.classList.toggle("a",!en(8))}),document.addEventListener("keydown",n=>{const t=Lt[n.key];if(t)if(n.preventDefault(),function(...n){document.body.classList.add(...n)}("C"),Pt.classList.contains(h)){if(a(t)){const n=Pt.querySelectorAll("& div button:not(.p)").values().toArray(),o=n.indexOf(document.activeElement);console.log({buttons:n,bn:o,action:t}),n[(o+1)%n.length]?.focus()}}else t===Et?xt.click():zt(t)}),eo=1),ro.append((wt.append(ht,pt,vt,yt),wt),(Pt.innerHTML="",Pt.append(...At.map(jt)),It(),Pt),function(){St.innerHTML="";const n=$t(8);return n.append(Ot),St.append(n,$t(9)),St}(),xt??=e({t:"w",i:async()=>{if(!An.G)return;xt.disabled=1,await Mt(dt(-5),xt),s.l(6,-5);const n=function(){const n=(e=An.G).F.W.filter(n=>e.H.every((t,o)=>n[o]===t)).map(n=>n.slice(e.H.length)),t=n.map(n=>n[0]),o={};var e;t.forEach(n=>{o[n]=(o[n]||0)+1});const r=K(t).sort((n,t)=>o[t]-o[n]);return console.debug("Getting best next move: ",o,n),r[0]}();void 0!==n?Ft(n):gt(1)}},[tn(24)," ",dt(-5),Dt(Et)])),so=function(n){const t=e({t:["w","s"],i:()=>{!async function(n,t){if(T(8))return j(8,""),void oo(n);if(!Kt)try{to(0),Kt=await async function(){if(!navigator.mediaDevices?.getUserMedia)throw Error("Microphone capture is not supported on this device/browser.");if("undefined"==typeof MediaRecorder)throw Error("Recording is not supported on this device/browser.");let n;try{n=await navigator.mediaDevices.getUserMedia({audio:1})}catch(s){const n=s?.name??"Error",t=s?.message??s+"";if(console.error("getUserMedia failed:",n,t),/at least one of audio and video must be requested/i.test(t))throw Error("The browser rejected the microphone request. Ensure you're on HTTPS, not in a restricted iframe, and that mic permission is allowed.");throw s}const t=new MediaRecorder(n),o=[];t.addEventListener("dataavailable",n=>{n.data&&n.data.size&&o.push(n.data)});const e=new Promise((e,r)=>{t.addEventListener("stop",async()=>{try{const n=t.mimeType||"audio/webm",r=new Blob(o,{type:n}),s=await function(n){return new Promise((t,o)=>{const e=new FileReader;e.onerror=()=>o(e.error),e.onloadend=()=>t(e.result+""),e.readAsDataURL(n)})}(r);e(s)}catch(s){r(s)}finally{n.getTracks().forEach(n=>n.stop())}}),t.addEventListener("error",n=>{r(n?.error??n)})});t.start();const r=()=>{if("recording"===t.state){try{t.requestData()}catch{}t.stop()}};return n.getAudioTracks().forEach(n=>n.addEventListener("ended",r)),{stop:r,done:e}}(),Kt.done.then(o=>{if(o)for(const e of t)j(e,o),oo(n)}),n.classList.add("q"),await E(1e3),Kt?.stop()}catch(o){console.error("Error starting recording:",o),alert(o instanceof Error?o.message:"unknown error")}finally{n.classList.remove("q"),Kt=void 0,to()}}(t,n)}});return oo(t),t}([8]),ro.append(so),so.classList.toggle("a",!en(8)),qt(),Ct(),An.G||Tn()||lo(1),ro}function lo(n=0){var t;t=function(n=0){const t=Gn(An.G)&&(!cn()||An.G.H.length<=Fn(An.G)),r=!n&&cn()&&!t,c=t?function(){if(!An.G)return 0;const n=An.G.F._,t=n?ft[n]:0,o=cn()?Nn(An.G.F)-An.G.H.length:0;return 10+-1*An.K+t+o}():0,i=o({t:"O"});s.subscribe(1,()=>{i.remove()});const u=e({text:tn(n?0:r?1:2),t:"q",i:async()=>{t&&(u.classList.add("a"),await async function(n,t){E(500).then(()=>{s.l(6,t)}),await async function(n,t){const o=500/n;for(let e=0;e<n;e++){const r=e/n;Mt("ðŸ§¶",t,.5+(e%2==0?-1:1)*r*.3,360*r),await L(o)}}(t,n)}(u,c)),s.l(0,{sn:0}),i.remove(),vt.classList.toggle("p",1)}});if(i.append(u),t){const n=o({text:tn(26,dt(c)),t:"A"});i.append(n)}if(r){const n=e({text:tn(5),t:"q",i:()=>{s.l(0,{sn:1}),i.remove()}});u.classList.remove("q"),i.append(n)}return i}(n),Pt.append(t),Pt.classList.toggle(h,1),St.classList.toggle("a",1),xt.classList.toggle("a",1),t.querySelector("button.q").focus()}const fo=[];async function mo(n){const t=mn();let c=0;Gn(An.G)&&!n.sn&&function(){if(!Tn())return void(An.V=void 0);An.V=An.Y;let n=An.Y+1;n>2&&(n=-1),An.Y=n,n.toString()}(),!t||Tn()||n.sn||(c=await async function(){let n;const t=o({t:"c"}),c=o({text:tn(6)});t.append(c);const i=o({t:"n",text:tn(17)}),u=e({text:tn(27),t:"e",i:()=>{n=1,Bt?.close(1)}}),a=o({t:"v"}),f=function(){const n=dn();return hn(n),n.slice(0,2)}(),d=f.map((t,o)=>function(s){const d=W(s)?9:l(s)?7:8;let m;W(s)&&(m=F(s).cloneNode(1),r(m));const w=e({t:"x",text:tn(d),i:e=>{W(s)?m.classList.add(U(s)):e.target.innerHTML=l(s)?wn(s):Z[s],function(e){if(n)return;u.remove(),i.innerHTML=tn(un[t]),i.classList.add("m"),c.innerHTML=tn(18),n=t,Bt&&Bt.Mn.classList.remove("a");const r=e.target,s=0===o?a.lastElementChild:a.firstElementChild;2===f.length&&(r.style.setProperty("--t-x",0===o?"calc(50% + 1rem)":"calc(-50% - 1rem)"),s.classList.add("a")),r.classList.add("b")}(e)}});return m&&w.append(m),w}(t));return a.append(...d),t.append(a,i,u),Bt=function(n){const t=o({t:"s2",i:n=>n.stopPropagation()}),r=o({t:"f2"},[n]);function c(n){t.classList.remove("d2"),s.l(5,n)}const i=e({text:tn(2),t:"q",i:()=>c(1)});return t.append(r,o({t:"a2"},[i])),document.body.appendChild(t),{open:()=>(E(0).then(()=>t.classList.add("d2")),r.classList.toggle("g2",r.scrollHeight>r.clientHeight),new Promise(n=>{s.subscribe(5,n)})),close:n=>{c(n)},Mn:i,destroy:()=>{t.remove()}}}(t),Bt.Mn.classList.add("a"),Bt.open().then(t=>(t&&n&&function(n){const t=fn(),o=[...new Set([...t,...n])];o.join(","),ln=o}(1==n?on:[n]),E(600).then(()=>Bt?.destroy()),t&&n||0))}()),rt(),document.body.classList.remove("i"),io&&An.Y!==An.V&&void 0!==An.V&&2!==An.V&&(console.debug("Was different setup, removing game field"),io.remove(),io=void 0,uo?.remove(),uo=void 0);const i=function(){const n=An.Y,t=Dn[n];if(!t)return;const o=In(t,{nn:1,X:1});return{Pn:{U:Rn[n],J:o.J,W:[]},Sn:0===n?5:void 0}}();let u=function(n,t){const o=!An.G;if(n.xn){let t;try{t=In(n.xn),console.debug("Loaded game setup from URL:",t)}catch(s){console.error("Failed to parse game setup from string:",s)}if(t)return t}{const n=location.hash.replace("#","");let r;if(o&&n&&!t&&!mn())try{r=In(decodeURI(n)),console.debug("Loaded game setup from hash:",r),e=r,p.every(n=>null!==e.J[n])||(console.warn("Invalid game setup in URL hash, ignoring it."),r=void 0)}catch(s){console.error("Failed to parse game setup from hash:",s)}if(r)return r}var e;let r;return r=n.sn&&An.G?An.G.F:t?t.Pn:null,r}(n,i);null===u&&(u=await async function(n=5){const t=async function(n=5){await E(0);const t=Nt(n),o=Math.random()<.3*mt();return{...Wt(t,{ln:cn(),un:0,fn:Math.random()<1-.5*mt(),an:o?4:5})}}(n),e=async function(){if(!io)return void console.error("shuffleFieldAnimation should only be called after gameFieldElem is initialized");const n=o({t:"V",text:tn(23)});io.append(n);for(let t=0;t<2;t++){const n=qn(Wt(Nt(),{ln:0,un:1,fn:1,an:5})),t=bn(n,9);await vo(n,t,0,1),await L(300)}n.remove()}(),[r]=await Promise.all([t,e]);return r}()),An.K=n.sn?An.K+1:0,await async function(n,t,o,e){An.G=qn(n),An.Z=bn(An.G,9);{const o=Ln(n);location.hash=t||mn()?"":"#"+o}document.body.style.setProperty("--s-cnt",n.U.toString()),s.l(1),io||(io=po(n.U),wo(),await L(300)),await vo(An.G,An.Z,0,e)}(u,i,0,!n.sn),function(n,t){n?.Sn?Ft(n?.Sn):t&&l(t)&&Ft(t)}(i,c)}function wo(){io?(co||(co=o({t:"B"}),document.body.append(co),co.addEventListener("scroll",()=>{rt()})),uo=ao(),co.append(io,uo)):console.warn("No game field element to append")}function ho(n){return fo[n.A]?.[n.L]}function po(n){const t=o({t:"N"});fo.length=0;for(let e=0;e<n;e++){const e=[],r=o({t:"M"});t.append(r);for(let t=0;t<n;t++){const n=o({t:"r"});r.append(n),e.push(n)}fo.push(e)}return t}async function vo(n,t,o,e){for(const s of Bn){const t=zn(s),o=Un(n.F,s);if(o){const n=ho(o);n.contains(t)?e&&r(t):n.append(t),W(s)&&t.classList.toggle(U(s),!y(s)||en(s))}}o||await L(300),yo(n,t)}function yo(n,t,o=0){for(const e of Bn){const r=zn(e),s=Un(n.F,e),c=n.$[e];if(null===s||null===c)continue;const[i,u]=C(c,s);if(r.style.transform=`translate(${100*u}%, ${100*i}%)`,V(e)){const t=!nt(n,c,4)&&!o;document.body.classList.toggle("u",t),r.classList.toggle("a",t)}if(v.includes(e)&&t){const n=t[e],o=n?O(c,n):void 0,s=r.querySelector("."+it.tn);o?s?lt(s,o):r.append(at(o)):s?.remove()}}}const go=(n,t,o)=>n+o*(t-n);let Co,bo,Mo,Po;async function So(n){const t=new Gt;t.init(n),await Xt(t);const o=t.Cn();return URL.createObjectURL(new Blob([o],{type:"audio/wav"}))}!function(o,e,r){let s=Promise.resolve();if(e&&e.length>0){let o=function(n){return Promise.all(n.map(n=>Promise.resolve(n).then(n=>({status:"fulfilled",value:n}),n=>({status:"rejected",reason:n}))))};const c=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),u=i?.nonce||i?.getAttribute("nonce");s=o(e.map(o=>{if(o=function(n,t){return new URL(n,t).href}(o,r),o in t)return;t[o]=1;const e=o.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(r)for(let n=c.length-1;n>=0;n--){const t=c[n];if(t.href===o&&(!e||"stylesheet"===t.rel))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const i=document.createElement("link");return i.rel=e?"stylesheet":n,e||(i.as="script"),i.crossOrigin="",i.href=o,u&&i.setAttribute("nonce",u),document.head.appendChild(i),e?new Promise((n,t)=>{i.addEventListener("load",n),i.addEventListener("error",()=>t(Error("Unable to preload CSS for "+o)))}):void 0}))}function c(n){const t=new Event("vite:preloadError",{cancelable:1});if(t.kn=n,window.dispatchEvent(t),!t.defaultPrevented)throw n}s.then(n=>{for(const t of n||[])"rejected"===t.status&&c(t.reason);return Promise.resolve({}).catch(c)})}(0,__vite__mapDeps([0]),import.meta.url);let xo=0;function ko(n=0){Po.innerText=dt(n)}(async()=>{(function(){if(xo)return;xo=1;const n=o({t:"f"});Mo=o({t:"d",text:"çŒ«å’ªå›¢èš"}),n.append(Mo);const t=o({t:"g"}),r=e({text:"ðŸ“‚",i:()=>{const n=An.G?Ln(An.G.F):"",t=window.prompt(tn(30),n);t&&mo({xn:t,sn:0})},t:["o","w"]});function c(){r.classList.toggle("a",mn())}t.append(r),c();{const n=e({text:"ðŸ”Š",i:n=>{const t=no();n.target.textContent=t?"ðŸ”Š":"ðŸ”‡"},t:["o","w"]});t.append(n)}Po=o(),ko(),t.append(Po),n.append(t),document.body.append(n),Tn()||location.hash.length>1?mo({sn:0}):async function(){if(io)return void console.error("initialize function should only be called once");io=po(5);const n=qn(Nt());await vo(n,void 0,1,1),wo()}(),s.subscribe(0,n=>{mo(n)}),s.subscribe(2,n=>{n.cn&&document.body.classList.add("i"),c();{const t=n.cn?Co:bo;t&&D(t)}}),s.subscribe(6,n=>{!function(n){const t=function(n){const t=0+n;return t.toString(),t}(n);var o;o={On:80*Math.abs(n),An:0,En:t,Ln:n=>{ko(Math.round(n))}},function({On:n=300,Ln:t,In:o,An:e,En:r}){!function(){const s=Number(document.timeline.currentTime??Date.now());!function c(i){const u=(i-s)/n,a=(l=Math.min(1,u))<.5?2*l*l:1-Math.pow(-2*l+2,2)/2;var l;t(o(e,r,a)),u<1?requestAnimationFrame(c):r&&t(r)}(s)}()}({In:go,...o})}(n)})})(),await E(0),await async function(){const n=new Gt;n.init(Ht),await Xt(n);const t=n.Cn(),o=URL.createObjectURL(new Blob([t],{type:"audio/wav"}));Zt=new Audio(o),Zt.loop=1,Zt.volume=.5,document.addEventListener("visibilitychange",()=>{Zt.muted=document.hidden}),document.addEventListener("click",()=>{Qt||(Qt=1,no())})}(),await async function(){Co||(Co=await So(Vt)),bo||(bo=await So(Yt))}()})();
